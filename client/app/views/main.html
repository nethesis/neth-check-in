<div ng-show="isLoading" class="ui segment loaderfirst">
    <p></p>
    <div class="ui active inverted dimmer">
        <div class="ui loader"></div>
    </div>
</div>

<div ng-show="!isLoading && isError" class="ui negative message container error">
    <i class="close icon"></i>
    <div class="header">
        Server request error
    </div>
    <p>Check server is running
    </p>
</div>

<div class="ui dimmer modals page transition {{showImportModal ? 'visible active' : 'hidden'}}">
    <div class="ui modal transition {{showImportModal ? 'visible active' : 'hidden'}} t-6">
        <i ng-click="showImportModal = false" class="close icon"></i>
        <div class="header">
          Import CSV
        </div>
        <div class="content">
          <div class="description">
            <div class="ui form">
                <div class="grid-cols">
                    <div class="ui action input">
                        <input type="text" ng-disabled="true" style="width: auto !important;" ng-model="fileName">
                        <input type="file" id="fileCsv" accept=".csv" class="hidden">
                        <button ng-click="clickFileCsv()" class="ui teal right labeled icon button">
                            <i class="file icon"></i>
                            File CSV
                        </button>
                    </div>
                    <div class="field">
                        <div ng-click="ignoreFirst = !ignoreFirst" class="ui selection dropdown {{ignoreFirst ? 'teal-bord black-teal-border' : ''}}">
                            Ignora la prima riga del file   
                            <div class="custom-radio {{ignoreFirst ? 'teal-back' : ''}}"></div>
                        </div>
                    </div>
                </div>
                <div class="field mt-2">
                    <label>Struttura</label>
                    <textarea ng-model="structure" rows="15"></textarea>
                </div>
            </div>
          </div>
        </div>
        <div class="actions">
          <div ng-click="showImportModal = false" class="ui black deny button">
            Annulla
          </div>
          <div ng-click="importCSV()" class="ui positive right labeled icon button">
            Continua
            <i class="checkmark icon"></i>
          </div>
        </div>
    </div>
</div>

<div class="ui dimmer modals page transition {{showExportModal ? 'visible active' : 'hidden'}}">
    <div class="ui modal transition {{showExportModal ? 'visible active' : 'hidden'}} t-6">
        <i ng-click="showExportModal = false" class="close icon"></i>
        <div class="header">
          Export CSV
        </div>
        <div class="content">
          <div class="description">
            <div class="ui form">
                <div class="field">
                    <label>Struttura</label>
                    <textarea ng-model="exportStructure" rows="15"></textarea>
                </div>
            </div>
          </div>
        </div>
        <div class="actions">
          <div ng-click="showExportModal = false" class="ui black deny button">
            Annulla
          </div>
          <div ng-click="exportCSV()" class="ui positive right labeled icon button">
            Continua
            <i class="checkmark icon"></i>
          </div>
        </div>
    </div>
</div>

<div ng-show="!isLoading && !isError" class="ui grid container cont" style="width: calc(1500px + 2rem) !important;">
    <div class="tablet mobile only row">
        <div class="ui borderless huge fluid menu">
            <a class="header item"> Project Name</a>
            <div class="right menu">
                <a class="menu item">
                    <div class="ui basic icon toggle button">
                        <i class="content icon"></i>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <div class="ui three steps">
        <div class="step">
            <div class="content">
                <div class="title">{{totalCheckin}}</div>
                <div class="description">Totale Partecipanti</div>
            </div>
        </div>
        <div class="active step">
            <div class="content">
                <div class="title">{{doneCheckin}}</div>
                <div class="description">Check-in Eseguiti</div>
            </div>
        </div>
        <div class="step">
            <div class="content">
                <div class="title">{{percentCheckin}}%</div>
                <div class="description">Percentuale Completamento</div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="ui message" style="padding-top: 4.1rem;">
            <h1 class="ui huge header">
              <img style="margin-top: -12px;" src="images/logo.png"></img>  Neth Check-in
            </h1>

            <div id="btns-container">
                <button ng-click="showImportModal = true" class="ui basic icon button item big tiny-margin-top" data-tooltip="Import CSV" data-position="top center"> <i class="upload icon"></i> </button>
                <button ng-click="showExportModal = true" class="ui basic icon button item big tiny-margin-top" data-tooltip="Export CSV" data-position="top center"> <i class="share icon"></i> </button>

                <button ng-click="showNewForm()" class="ui basic icon button item big tiny-margin-top ml-30 primary" data-tooltip="Nuovo partecipante" data-position="top center"> <i class="add user icon"></i> </button>
            </div>


            <div ng-if="newUser" class="ui large form newser">
                <div class="three fields">
                    <div class="field">
                        <label>Nome</label>
                        <input ng-model="newname" ng-change="change()" id="inputname" type="text" placeholder="Inserisci il nome" autocomplete="off">
                    </div>
                    <div class="field">
                        <label>Cognome</label>
                        <input ng-model="newsurname" ng-change="change()" id="inputsurname" type="text" placeholder="Inserisci il cognome" autocomplete="off">
                    </div>
                    <div class="field">
                        <label>Azienda</label>
                        <input ng-model="newagency" ng-change="change()" type="text" id="inputagency" placeholder="Inserisci il nome dell' azienda" autocomplete="off">
                    </div>
                </div>
                <div ng-click="createAttendee(newname, newsurname, newagency)" id="savebutton" class="ui {{disabled ? 'disabled' : ''}} medium primary button"><i class="save icon"></i> {{save == false ? 'Fallito' : save == true ? 'Modifiche salvate' : 'Salva'}}</div>
            </div>

            <div class="row dt-table">
                <div class="sixteen wide column">

                    <div style="margin-bottom: 15px; margin-top:20px;" class="ui large fluid icon input">
                        <input id="searchInput" type="text" ng-model="search.term" placeholder="Ricerca per nome, cognome, e-mail e azienda..." autocomplete="off">
                        <i class="search icon"></i>
                    </div>

                    <table ng-table="tableParams" class="ui celled table dataTable">
                        <tr ng-repeat="user in $data | filter:search.term" class="{{user.sala.toLowerCase() === 'sala violante' ? 'warning' : user.sala.toLowerCase() === 'sala ginevra' ? 'positive' : user.sala.toLowerCase() === 'sala concordia' ? 'negative' : user.sala.toLowerCase() === 'sala polissena a' ? 'informative' : ''}}">
                            <!--<td title="'Nome Evento'" class="single line" sortable="'nome_evento'">
                {{user.nome_evento}}</td>-->
                            <td title="'Nome'" class="single line" sortable="'nome'">
                                {{user.nome}}</td>
                            <td title="'Cognome'" class="single line" sortable="'cognome'">
                                {{user.cognome}}</td>
                            <td title="'E-mail'" class="single line" sortable="'email'">
                                {{user.email}}</td>
                            <td title="'Azienda'" class="single line" sortable="'agency'">
                                {{user.agency}}</td>
                            <td title="'Sala'" class="single line" sortable="'sala'">
                                <strong>{{user.sala}}</strong></td>
                            <td title="'Tipo'" class="single line" sortable="'tipo'">
                                {{user.tipo}}</td>
                            <td style="width: 258px;" title="'Stato'" class="single line" sortable="'stato'">
                                <span class="{{user.stato == 'Check-in eseguito' ? 'red' : 'green action'}}"><button ng-click="functionCheckin(user.stato,user.id,user.nome,user.cognome,user.agency,user.tipo,user.sala)" class="ui blue button medium {{user.stato == 'Check-in eseguito' ? 'hidden' : 'show'}}">Esegui check-in</button><div class="ui buttons {{user.stato == 'Check-in eseguito' ? 'show' : 'hidden'}}"><button class="ui button disabled medium">Check-in eseguito</button><button ng-click="functionRePrint(user.id)" class="ui positive button yellow medium">Ripristina</button></div></span>
                            </td>
                        </tr>
                    </table>

                </div>
            </div>
        </div>
        <div id="urlPhp" style="width: 100%; text-align: right; padding-right:15px;"></div>
    </div>
</div>



<style type="text/css">
    .ui.borderless.huge.menu {
        background-color: #f8f8f8;
    }

    .ui.borderless.huge.menu .header.item {
        font-size: 1.2em;
    }

    .ui.vertical.menu {
        display: none;
        background-color: #f8f8f8;
    }

    .ui.vertical.menu .item .title .dropdown.icon {
        float: none;
    }

    .ui.vertical.menu .item .content .item {
        padding: 0.5em 1em;
    }

    .ui.vertical.menu .header.item {
        text-transform: uppercase;
    }

    .ui.message {
        background-color: rga(238, 238, 238);
        box-shadow: none;
        padding: 4.7em 3.5em;
    }

    .ui.message h1.ui.header {
        font-size: 4.5em;
    }

    .ui.message p.lead {
        font-size: 1.3em;
        color: #333333;
        line-height: 1.4;
        font-weight: 300;
    }
</style>